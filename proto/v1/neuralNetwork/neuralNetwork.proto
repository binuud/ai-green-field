/// Please use the following editor setup for this file:

// Tab size=4; Tabs as spaces; Clean up trailing whitepsace
// 'make proto' will run clang-format to fix formatiing
syntax = "proto3";
package neuralNetwork;

option go_package = "github.com/binuud/ai-green-field/gen/go/v1/neuralNetwork";

import "google/protobuf/timestamp.proto";

message TrainingAction {
  enum TrainingActionEnum {
    TrainingActionIgnore = 0;
    New = 1;   // Starts training fresh, by resetting the models
    Start = 2; // Starts from a previously paused position
    Pause = 3; // Pauses the Training
    Stop = 4;  // Stops the Training
  }
  TrainingActionEnum action = 1;
}

message TrainingState {

  enum TrainingTypeEnum {
    TrainingTypeIgnore = 0;
    Classification = 1;
    Regression = 2;
  }

  enum TrainingStateEnum {
    TrainingStateIgnore = 0;
    New = 1;
    Running = 2;
    Error = 3;
    Pause = 4;
    Completed = 5;
    Stopped = 6;
  }

  enum ActivationFunctionEnum {
    ActivationFunctionIgnore = 0;
    ActivationFunctionNone = 1;
    Relu = 2;
    Sigmoid = 3;
    Tanh = 4;
    Linear = 5;
  }

  enum RegularizationEnum {
    RegularizationIgnore = 0;
    L1 = 1;
    L2 = 2;
    Dropout = 3;
    RegularizationNone = 4;
  }

  // uuid to keep track of different training runs
  string uuid = 1;

  // Learning rate
  float learningRate = 2;
  // Number of training epochs
  int32 epochs = 3;

  // number of epochs to run, and return state to UI
  // Traning runs and pauses after epochBatch number of runs
  // waiting for user input
  int32 epochBatch = 4;

  // Activation function type (e.g., "relu", "sigmoid", "tanh")
  ActivationFunctionEnum activationFunction = 5;

  // Regularization type (e.g., "l1", "l2", "dropout", "none")
  RegularizationEnum regularization = 6;

  // Regularization strength/coefficient
  float regularizationRate = 7;

  TrainingTypeEnum trainingType = 8;

  float trainingLoss = 10;
  float testLoss = 11;

  // number of inputs
  int32 numInputs = 12;

  // number of outputs
  int32 numOutputs = 13;

  // number of hidden layers
  int32 numLayers = 14;

  // Current training state
  TrainingStateEnum state = 20;

  // current run state, the epoch iteration run which is currently running
  int32 currentEpoch = 21;

  google.protobuf.Timestamp createdAt = 22;
  google.protobuf.Timestamp updatedAt = 23;
}